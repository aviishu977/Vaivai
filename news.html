<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>სიახლეები</title>

  <!-- Google Fonts & Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" />
  <link rel="stylesheet" href="theme.css" />
  <link rel="stylesheet" href="style.css" />

  <meta name="description" content="გადაიღე სელფი პირდაპირ ბრაუზერში, ატვირთე და გაუზიარე მარტივად! FINONE – სწრაფი და თანამედროვე ქართული ფოტოაპლიკაცია." />
  <meta name="keywords" content="FINONE, პოლაროიდი, ფოტო აპი, ონლაინ გადაღება, სელფი, სელფი აპლიკაცია, კამერა საიტზე, ფოტო ბრაუზერში, ქართული ფოტო საიტი, ონლაინ ფოტოაპი, browser camera, selfie platform Georgia" />
  <meta name="author" content="შეჩემა" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />

  <!-- Open Graph & Twitter Cards - განახლება შესაბამისი ინფორმაციისთვის -->
  <meta name="description" content="გადაიღე სელფი პირდაპირ ბრაუზერში, ატვირთე და გაუზიარე მარტივად! FINONE – სწრაფი და თანამედროვე ქართული ფოტოაპლიკაცია.">
  <meta name="keywords" content="FINONE, პოლაროიდი, ფოტო აპი, ონლაინ გადაღება, სელფი, სელფი აპლიკაცია, კამერა საიტზე, ფოტო ბრაუზერში, ქართული ფოტო საიტი, ონლაინ ფოტოაპი, browser camera, selfie platform Georgia">
  <meta name="author" content="შეჩემა">
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="FINONE – გადაიღე სელფი პირდაპირ საიტიდან" />
  <meta property="og:description" content="სელფის გადაღება, ატვირთვა და გაზიარება – პირდაპირ ბრაუზერიდან. ქართული ონლაინ პლატფორმა სწრაფი ფოტოსაზიარებლად." />
  <meta property="og:image" content="https://i.postimg.cc/bJr4Sz02/Picsart-25-07-12-03-10-36-438.jpg" />
  <meta property="og:url" content="https://finone.vercel.app/" />
  <meta property="og:site_name" content="FINONE" />

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="FINONE – გადაიღე შენი მომენტი ონლაინ" />
  <meta name="twitter:description" content="გადაიღე და გაუზიარე ფოტოები ონლაინ – პირდაპირ შენი ბრაუზერიდან ქართულად." />
  <meta name="twitter:image" content="https://finone.vercel.app/" />

  <link rel="icon" href="favicon.png" type="image/png" />
  <link rel="canonical" href="https://finone.vercel.app/" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Material+Symbols+Rounded&display=swap" rel="stylesheet" />

  <style>
    :root {
      --color-bg: #000;
      --color-white: #fff;
      --color-primary: #FF5555;
      --color-text-main: #e0e0e0;
      --color-text-muted: #aaaaaa;
      --color-card-bg: #121212;
      --color-border: #333;
      --border-radius-lg: 18px;
      --border-radius-md: 12px;
      --spacing-unit: 18px;
      --max-content-width: 600px;
      --shadow-elevation-1: 0 2px 12px rgba(255,255,255,0.10);
    }
    @font-face {
      font-family: 'myffont';
      src: url('alk-sanet.ttf');
    }
    *, *::before, *::after {
      box-sizing: border-box;
      font-family: 'myffont', 'Inter', sans-serif;
      line-height: 1;
    }
    body {
      background: var(--color-bg);
      color: var(--color-text-main);
      font-family: 'Inter', sans-serif;
      max-width: var(--max-content-width);
      margin: 0 auto;
      padding: var(--spacing-unit);
      min-height: 100vh;
    }
    header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      color: var(--color-primary);
      text-shadow: 0 4px 14px #ff55555c;
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 24px;
      padding: 20px;
      letter-spacing: 1px;
      border-bottom: 1.5px solid var(--color-white);
    }
    .material-icons-round {
      font-size: 2.25rem;
      vertical-align: middle;
      color: var(--color-primary);
      text-shadow: 0 4px 14px #ff55555c;
      transition: color 0.2s;
    }
    #backBtn {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--color-card-bg);
      color: var(--color-white);
      font-size: 1.15rem;
      font-weight: 700;
      border: none;
      border-radius: var(--border-radius-md);
      padding: 12px 22px;
      cursor: pointer;
      margin-bottom: 28px;
      margin-top: 10px;
      box-shadow: 0 2px 10px #ff555545;
      transition: background 0.15s, color 0.15s, transform 0.15s;
      outline: none;
      text-decoration: none;
      user-select: none;
      border: 2px solid var(--color-primary);
    }
    #backBtn:hover, #backBtn:focus {
      background: var(--color-primary);
      color: var(--color-bg);
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 6px 18px #ff555575;
    }
    #newsList {
      display: flex;
      flex-direction: column;
      gap: 28px;
      margin-bottom: 40px;
    }
    .news-card {
      background: var(--color-card-bg);
      border-radius: var(--border-radius-md);
      box-shadow: var(--shadow-elevation-1);
      border: 2px solid var(--color-white);
      overflow: hidden;
      animation: fadeInUp 0.7s forwards;
      display: flex;
      flex-direction: column;
      position: relative;
      padding-bottom: 12px;
    }
    .news-img {
      width: 100%;
      max-height: 260px;
      object-fit: cover;
      display: block;
      box-shadow: 0 4px 18px #ff555515;
      margin-bottom: 0;
      border-bottom: 2px solid white;
    }
    .news-body {
      padding: 20px 18px 8px 18px;
      display: flex;
      flex-direction: column;
      gap: 7px;
    }
    .news-title {
      display: flex;
      align-items: center;
      gap: 7px;
      font-size: 1.18rem;
      font-weight: 700;
      color: var(--color-white);
      margin-bottom: 7px;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 10px #0000003a;
    }
    .news-title .material-icons-round {
      font-size: 1.4em;
      color: var(--color-primary);
      margin-top: 1px;
      filter: drop-shadow(0 2px 8px #ff55554a);
    }
    .news-text {
      font-size: 1.04rem;
      color: var(--color-text-main);
      margin-bottom: 7px;
      line-height: 1.58;
      word-break: break-word;
      padding-left: 3px;
    }
    .news-meta {
      display: flex;
      align-items: center;
      gap: 9px;
      font-size: 0.98rem;
      color: var(--color-text-muted);
      text-align: right;
      margin-top: 2px;
      letter-spacing: 0.2px;
      justify-content: flex-end;
      padding-right: 2px;
    }
    .news-meta .material-icons-round {
      font-size: 1.1em;
      vertical-align: middle;
      color: #aaa;
      margin-right: 4px;
    }
    @keyframes fadeInUp {
      0% { opacity:0; transform:translateY(15px);}
      100% { opacity:1; transform:translateY(0);}
    }
    @media (max-width: 520px) {
      body { padding: 8px; }
      .news-body { padding: 12px; }
      .news-title { font-size: 1.03rem; }
      .news-card { border-radius: 15px; }
      .news-img { border-radius: 12px 12px 0 0; }
      #backBtn { font-size: 1rem; padding: 9px 14px;}
    }
    .bnv-btn span{
      font-size: 2rem;
    }
    .burger {
  position: fixed;
  top: 20px;
  left: 20px;
  width: 30px;
  height: 25px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  cursor: pointer;
  z-index: 1001;
}
.burger span {
  height: 4px;
  background: var(--color-white);
  border-radius: 2px;
  transition: 0.3s;
}

/* ნავიგაცია */
.nav {
  position: fixed;
  top: 0;
  left: -260px;
  width: 240px;
  height: 100%;
  background: var(--color-bg);
  backdrop-filter: blur(15px);
  padding-top: 80px;
  display: flex;
  flex-direction: column;
  transition: left 0.3s ease;
  z-index: 1000;
  border-right: 4px solid var(--color-white);
  flex-wrap: wrap;
  align-items: center;
}
.nav.active {
  left: 0;
}
.nav a {
  padding: 15px 25px;
  text-decoration: none;
  font-size: 16px;
  color: var(--color-text-main);
  transition: background 0.2s;
  width: 90%;
}


/* მოდალი */
.modal-overlay {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 2000;
}
.modal-overlay.show {
  display: flex;
}
.modal {
  position: relative;
  background: var(--color-bg);
  backdrop-filter: blur(20px);
  padding: 25px;
  border: 2px solid var(--color-white);
  border-radius: 16px;
  width: 100%;
  max-width: 420px;
  box-shadow: 0 6px 15px var(--color-border);
  color: var(--color-text-main);
  animation-fill-mode: forwards;
  box-sizing: border-box;
  overflow-wrap: break-word;
}

/* დახურვის ღილაკი */
.close-modal {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 32px;
  height: 32px;
  font-size: 24px;
  line-height: 32px;
  text-align: center;
  cursor: pointer;
  color: var(--color-text-muted);
  background: var(--color-border);
  border-radius: 50%;
  border: none;
  transition: color 0.2s, background-color 0.2s;
  padding: 0;
  user-select: none;
}
.close-modal:hover,
.close-modal:focus {
  color: var(--color-white);
  background: var(--color-card-bg);
  outline: none;
}

/* სათაურის და ტექსტის სტილი */
.modal h2 {
  margin-top: 0;
  margin-bottom: 12px;
  font-size: 20px;
  word-break: break-word;
}
#modalContent {
  font-size: 15px;
  line-height: 1.6;
  margin: 0;
  word-break: break-word;
  color: var(--color-text-main);
}

/* მედიაკვერი დესკტოპისთვის */
@media (min-width: 768px) {
  .burger {
    display: none;
  }
  .nav {
    position: relative;
    left: 0;
    flex-direction: row;
    height: auto;
    padding: 0;
    box-shadow: none;
    justify-content: center;
  }
  .nav a {
    padding: 15px 20px;
  }
}
.modal a {
  color: #FF5555;
}
</style>
</head>
<body>
  
  <!-- ქვედა ნავიგაცია ბურგერით -->
  <nav class="bottom-nav" aria-label="ქვედა ნავიგაცია">
    <button class="bnv-btn" id="burgerBtn" aria-label="მენიუს გახსნა" role="button" tabindex="0">
      <span class="material-symbols-rounded">menu</span>
    </button>

    <a href="#forup">
      <button class="bnv-btn" type="button" aria-label="მიმდინარე გვერდზე დაბრუნება">
        <span class="material-symbols-rounded">arrow_upward</span>
        <span class="active-dot"></span>
      </button>
    </a>
    
    <a href="index.html">
      <button class="bnv-btn" id="openCamera" aria-label="მთავარ გვერდზე დაბრუნება">
        <span class="material-symbols-rounded">home</span>
      </button>
    </a>

    <a href="chat.html">
      <button class="bnv-btn" type="button" aria-label="ჩათი">
        <span class="material-symbols-rounded">forum</span>
        <span class="active-dot"></span>
      </button>
    </a>

    <button class="bnv-btn" type="button" aria-label="თემის არჩევა" id="themeSelectBtn">
      <span class="material-symbols-rounded">palette</span>
      <span class="active-dot"></span>
    </button>
  </nav>

<div id="themePickerPanel" aria-label="თემის არჩევის პანელი" role="region" tabindex="-1" style="
  position: fixed;
  bottom: 65px; /* ბარის ზემოთ */
  right: 100px;
  background: var(--color-card-bg);
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  padding: 5px 5px;
  display: none;
  z-index: 100000;
  width: 70px;
  user-select: none;
  
">
  <button class="color-option" data-theme="dark" style="background:#000000;" title="ბნელი"></button>
  <button class="color-option" data-theme="light" style="background:#FFFFFF; border:1px solid #ccc;" title="ნათელი"></button>
  <button class="color-option" data-theme="gray" style="background:#2E2E2E;" title="ნაცრისფერი"></button>
  <button class="color-option" data-theme="blue" style="background:#001f3f;" title="ლურჯი"></button>
  <button class="color-option" data-theme="green" style="background:#003300;" title="მწვანე"></button>
  <button class="color-option" data-theme="purple" style="background:#2D004D;" title="იისფერი"></button>
  <button class="color-option" data-theme="sunset" style="background:#2c061f;" title="მზის ჩასვლა"></button>
  <button class="color-option" data-theme="orange" style="background:#FF6600;" title="ნარინჯისფერი"></button>
  <button class="color-option" data-theme="pink" style="background:#FFC0CB;" title="ვარდისფერი"></button>
  <button class="color-option" data-theme="teal" style="background:#008080;" title="თელ"></button>
</div>
</button>
  

  <!-- ბურგერ ნავიგაცია -->
  <nav class="nav" id="navMenu" aria-label="მთავარი ნავიგაცია">
    <a href="#" data-title="წესები" data-content="
        <ul>
          <li>იყავით პატივისცემით და მეგობრულად სხვა მომხმარებლების მიმართ.</li>
          <li>არ ატვირთოთ შეურაცხმყოფელი, ძალადობრივი ან არაკორექტული კონტენტი.</li>
          <li>დაიცავით ავტორთა უფლებები და არ გამოიყენოთ სხვა ადამიანების ფოტოები მათი თანხმობის გარეშე.</li>
          <li>არ გამოიყენოთ საიტი სპამის, რეკლამირების ან სხვა არასასურველი მიზნებისთვის.</li>
          <li>დაიცავით პირადი მონაცემების კონფიდენციალობა და არ გააზიაროთ სხვისი პირადი ინფორმაცია.</li>
          <li>ადმინისტრაცია უფლებას იტოვებს წაშალოს ნებისმიერი კონტენტი, რომელიც არღვევს წესებს.</li>
        </ul>
      ">წესები</a>
    <a href="#" data-title="ინსტრუქცია" data-content="
        <ol>
          <li>გაიარეთ რეგისტრაცია ან შედით სისტემაში ელ. ფოსტის და პაროლის გამოყენებით.</li>
          <li>დააჭირეთ ღილაკს „გადაღება“, რათა ჩართოთ კამერა.</li>
          <li>გაიღეთ სელფი ან ფოტო პირდაპირ ბრაუზერიდან.</li>
          <li>სურვილის შემთხვევაში, დაამატეთ ტექსტი ფოტოს აღწერისთვის.</li>
          <li>დააჭირეთ „ატვირთვას“, რათა ფოტო აიტვირთოს და გააიზიაროთ.</li>
          <li>ნახეთ სხვა მომხმარებლების მიერ ატვირთული მთავარ გვერდზე.</li>
        </ol>
      ">ინსტრუქცია</a>
    <a href="#" data-title="დახმარება" data-content="
      <p>დაგვიკავშირდით:</p>
      <ul>
        <li>ელ. ფოსტა: <a href='mailto:official.finone@gmail.com'>official.finone@gmail.com</a></li><br>
        <li>ინსტაგრამი: <a href='https://www.instagram.com/finone_official?igsh=MWV0OXV2OHE1aHh6dA=='>@finone_official</a></li>
      </ul>
    ">დახმარება</a>
    <a href="#" data-title="პირობები" data-content="
      <p>საიტი უზრუნველყოფს ფოტოების გადაღებისა და გაზიარების სერვისს მხოლოდ პირადი, არაკომერციული გამოყენებისთვის.</p>
      <p>მომხმარებელი პასუხისმგებელია ატვირთული კონტენტზე და ავტორთა უფლებების დაცვაზე.</p>
      <p>ადმინისტრაცია არ იღებს პასუხისმგებლობას მომხმარებლის მიერ ატვირთული ფოტოების შინაარსზე.</p>
      <p>პირადი მონაცემები ინახება კონფიდენციალურად.</p>
      <p>ადმინისტრაციას აქვს უფლება შეცვალოს საიტის ფუნქციონალი და წესები წინასწარი შეტყობინების გარეშე.</p>
      <p>საიტის გამოყენებით, მომხმარებელი ეთანხმება ამ პირობებს და ვალდებულია მათი დაცვის.</p>
    ">პირობები</a>
    <a class="newsbtn" href="news.html">სიახლეები</a>
    <a href="#" id="logoutBtn" style="color: #FF5555; font-weight: 700;">გასვლა</a>
  </nav>

  <header id="forup">⟡ FNΞ NEWS ⟡</header>

  <main>
    <div id="newsList">ჩატვირთვა...</div>
  </main>

  <!-- მოდალი -->
  <div class="modal-overlay" id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalContent" tabindex="-1">
    <div class="modal">
      <button class="close-modal" id="closeModalBtn" aria-label="მოდალის დახურვა">&times;</button>
      <h2 id="modalTitle">სათაური</h2>
      <div id="modalContent">ტექსტი</div>
    </div>
  </div>
<!-- Preloader Wrapper -->
<div id="preloader">
  <div class="loader"></div>
</div>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import {
      getFirestore,
      collection,
      query,
      orderBy,
      onSnapshot
    } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBRtcHMJJj-WD86E41ZVS3cm2ggQHyPYnI",
      authDomain: "photog-457a1.firebaseapp.com",
      projectId: "photog-457a1",
      storageBucket: "photog-457a1.appspot.com",
      messagingSenderId: "568507243860",
      appId: "1:568507243860:web:f9a7128c3e703aa79c3cc1",
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const newsList = document.getElementById("newsList");
    const burgerBtn = document.getElementById("burgerBtn");
    const navMenu = document.getElementById("navMenu");
    const modalOverlay = document.getElementById("modalOverlay");
    const modalTitle = document.getElementById("modalTitle");
    const modalContent = document.getElementById("modalContent");
    const closeModalBtn = document.getElementById("closeModalBtn");

    // დროის ფორმატირება
    function getRelativeTime(date) {
      const now = new Date();
      const diff = Math.floor((now - date) / 1000);
      if (diff < 60) return "ახლახანს";
      if (diff < 3600) return `${Math.floor(diff / 60)} წუთის წინ`;
      if (diff < 86400) return `${Math.floor(diff / 3600)} საათის წინ`;
      if (diff < 604800) return `${Math.floor(diff / 86400)} დღის წინ`;
      return date.toLocaleDateString();
    }

    // უსაფრთხო HTML escaping XSS-სთვის
    function escapeHtml(text) {
      const map = {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'};
      return text.replace(/[&<>"']/g, m => map[m]);
    }

    // სიახლეების ჩატვირთვა Firestore–დან რეალურ დროში
    function renderNews() {
      const q = query(collection(db, "news"), orderBy("timestamp", "desc"));
      onSnapshot(q, snapshot => {
        newsList.innerHTML = "";
        if (snapshot.empty) {
          newsList.innerHTML = "<p style='text-align:center;color:#aaa;font-size:1.1rem;'>სიახლეები ჯერ არ არის.</p>";
          return;
        }
        snapshot.forEach(docSnap => {
          const d = docSnap.data();
          const date = d.timestamp?.toDate ? d.timestamp.toDate() : new Date();
          const card = document.createElement("div");
          card.className = "news-card";
          card.innerHTML = `
            <img class="news-img" src="${escapeHtml(d.imageUrl || '')}" alt="სიახლის ფოტო" />
            <div class="news-body">
              <div class="news-title">
                <span class="material-icons-round" title="სიახლე">campaign</span>
                ${escapeHtml(d.title || '')}
              </div>
              <div class="news-text">
                <span class="material-icons-round" style="font-size:1.1em;vertical-align:middle;color:#FF5555;margin-right:4px;">article</span>
                ${escapeHtml(d.text || '')}
              </div>
              <div class="news-meta">
                <span class="material-icons-round" title="დრო">schedule</span>
                ${getRelativeTime(date)}
              </div>
            </div>
          `;
          newsList.appendChild(card);
        });
      });
    }

    // ბურგერ ღილაკის კლიკი - ნავიგაციის გამოჩენა/დამალვა
    burgerBtn.addEventListener("click", () => {
      navMenu.classList.toggle("active");
    });

    // Nav–ის ლინკების კლიკის მართვა მოდალისთვის
    navMenu.addEventListener("click", (e) => {
      const target = e.target.closest("a[data-title][data-content]");
      if (target) {
        e.preventDefault();
        modalTitle.textContent = target.dataset.title;
        modalContent.innerHTML = target.dataset.content;
        modalOverlay.classList.add("show");
        navMenu.classList.remove("active"); // ავტომატურად დავახუროთ ნავიგაცია
      }
    });

    // მოდალის დახურვის ღილაკი
    closeModalBtn.addEventListener("click", () => {
      modalOverlay.classList.remove("show");
    });

    // მოდალის ბექგრაუნდზე დახურვა კლიკით
    modalOverlay.addEventListener("click", e => {
      if (e.target === modalOverlay) {
        modalOverlay.classList.remove("show");
      }
    });

    // საწყისი და ფონიჭურვა
    renderNews();
  </script>

  <script src="theme.js"></script>
</body>
</html>
